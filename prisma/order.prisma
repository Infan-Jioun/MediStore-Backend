model Order {
  id              Int         @id @default(autoincrement())
  customerId      Int
  shippingAddress String
  totalAmount     Float
  status          OrderStatus @default(PLACED)
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt

  customer User @relation("CustomerToOrders", fields: [customerId], references: [id], onDelete: Cascade)

  items OrderItem[]
}

model OrderItem {
  id         Int    @id @default(autoincrement())
  orderId    Int
  medicineId Int
  quantity   Int
  price      Float

  order    Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
  medicine Medicine @relation(fields: [medicineId], references: [id], onDelete: Restrict)

  @@unique([orderId, medicineId])
}